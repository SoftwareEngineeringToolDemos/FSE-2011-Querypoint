<html>
    <head>
        <title>
            Case 1: Salary Calculation.
        </title>
        <script type="text/javascript">

        <!--
            var compute = function(){
                console.log("start ..............");
                var records = getRecords();
                records = sortRecords(records)
                var salariesBeforeTaxReduction = calculateSalary(records);
                reduceTax(salariesBeforeTaxReduction);
                console.log("..............  end.");
            };

            var sortRecords = function(records){
                var list = [];
                for (var p in records)
                    list.push(records[p]);
                list.sort(function(a,b){return a.baseSalary-b.baseSalary;});
                return list;
            };

            var calculateSalary = function(records){
                result = [];
                for (var i=0; i<records.length ; i++){
                    var record = records[i];
                    var salary = {};
                    salary.tax = .1;
                    try{
                       //record.lastName.length;
                       salary.value = record.baseSalary + record.bonusPoint*100 + record.married*3000 + record.children*4000 + record.senior*10000;
                       if (salary.value<90000 && record.age > 50){
                           salary.tax = 0;}
                    }catch(exc){
                       //ignore
                    }
                    result.push(salary);
                }
                return result;
            };

            var reduceTax = function(salariesBeforeTaxReduction){

                for (var i=0; i<salariesBeforeTaxReduction.length; i++){
                    var salary = salariesBeforeTaxReduction[i];
                    var finalSalary = {};
                    finalSalary.value = salary.value - salary.tax*salary.value;
                    if  (finalSalary.value >= 120000){
                        console.log("Warning : Salary is higher than maximum limit : " + finalSalary.value + " >= 120000");
                    } else if (finalSalary.value < 80000){
                        console.log("Error : Salary is lower than minimum limit : " + finalSalary.value + " < 80000");
                    } else {
                        console.log(i + ") The salary amount is : " + finalSalary.value)
                    }
                }
            };

            var getRecords = function(){
                return {
                ID_3345:{name:"A", company:"IBM", baseSalary: 92000 ,senior:1, married:0, children: 0,  age:44, bonusPoint:220},
                ID_5566:{name:"B", company:"GOOGLE", baseSalary: 88000 ,senior:1, married:0, children: 0, age:34, bonusPoint:25},
                ID_1234:{name:"C", company:"MICROSOFT", baseSalary:90000 ,senior:1, married:1, children: 0, age:40, bonusPoint:100},
                ID_4566:{name:"E", company:"INTEL", baseSalary: 90000 ,senior:0, married:0, children: 1, age:54, bonusPoint:70},
                ID_2234:{name:"F", company:"IBM", baseSalary: 89000 ,senior:1, married:1, children: 0, age:44, bonusPoint:350},
                ID_4353:{name:"G", company:"IBM", baseSalary: 91000 ,senior:0, married:1, children: 3, age:50, bonusPoint:150},
                ID_3333:{name:"H", company:"INTEL", baseSalary: 88000 ,senior:0, married:0, children: 0, age:28, bonusPoint:20},
                ID_1232:{name:"I", company:"GOOGLE", baseSalary: 85000 ,senior:1, married:0, children: 3, age:39, bonusPoint:250},
                ID_3344:{name:"J", company:"YAHOO", baseSalary: 91000 ,senior:0, married:1, children: 2, age:36, bonusPoint:300},
                ID_2084:{name:"K", company:"HP", baseSalary: 84000 ,senior:0, married:1, children: 0, ages:54, bonusPoint:10},
                ID_3400:{name:"L", company:"YAHOO", baseSalary: 83000 ,senior:0, married:0, children: 0, age:61, bonusPoint:90},
                ID_7794:{name:"M", company:"IBM", baseSalary: 85000 ,senior:1, married:0, children: 0,  age:29, bonusPoint:0},
                };
            };

        -->
        </script>

    </head>

    <body id="myBody">
    <h3>
        Background:
    </h3>
    <p>
        Open firebug and select console panel. Once you click on the button (Calculate Salaries!), a
            list of calculated salaries will appear. In the printed lines you see one Warning and one Error.
            Find the record causes the Warning and the defect causes the Error.
    </P>

    <button id="myParagraph" onclick="compute()">
      Calculate Salaries!
    </button>

    <p id>

    </p>
    </body>

</html>